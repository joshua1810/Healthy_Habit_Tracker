<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Healthy Habit Tracker</title>
<meta name="description" content="Track water, exercise, sleep, and screen time. Build streaks, earn badges, and visualize your progress.">
<style>
  :root{
    --bg:#0f1220;
    --surface:#15182a;
    --card:#1a1f35;
    --text:#eaf0ff;
    --muted:#a9b2c9;
    --accent:#6ae3b4;
    --accent-2:#7c87ff;
    --danger:#ff6b6b;
    --warning:#ffd166;
    --radius:18px;
    --shadow:0 12px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Noto Sans",sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 700px at -10% -10%, rgba(255,255,255,.06), transparent 60%),
      radial-gradient(1200px 700px at 110% -10%, rgba(255,255,255,.05), transparent 60%),
      linear-gradient(180deg, #0d1020, #0b0d18 60%);
    overflow-x:hidden;
  }
  header{
    position:sticky; top:0; z-index:10;
    display:grid; grid-template-columns: 1fr auto; gap:16px; align-items:center;
    padding: 18px clamp(16px, 5vw, 36px);
    background:color-mix(in hsl, var(--bg), transparent 10%);
    backdrop-filter: blur(8px);
    border-bottom:1px solid color-mix(in hsl, var(--muted), transparent 70%);
  }
  .brand{display:flex; align-items:center; gap:12px}
  .logo{
    width:42px;height:42px;border-radius:50%;
    background:conic-gradient(from 0deg, var(--accent), var(--accent-2), var(--accent));
    display:grid; place-items:center; font-weight:900; color:#0d1020; box-shadow:var(--shadow);
  }
  .brand h1{margin:0; font-size: clamp(18px, 3vw, 22px); letter-spacing:.3px}
  .actions{display:flex; gap:10px; align-items:center}
  .btn, .select, input[type="number"]{
    border:1px solid color-mix(in hsl, var(--muted), transparent 50%);
    background:var(--card); color:var(--text);
    border-radius:12px; padding:10px 12px; font-weight:600;
    box-shadow:none; cursor:pointer;
    transition: transform .12s ease, background .2s ease, border-color .2s ease, opacity .2s ease;
  }
  .btn:hover{transform:translateY(-1px)}
  .btn:active{transform:translateY(1px) scale(.98)}
  .btn.primary{background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#0f1220; border-color:transparent}
  .btn.ghost{background:transparent}
  .container{max-width:1100px; margin: 18px auto 40px; padding: 0 clamp(16px, 5vw, 36px);}
  .grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:16px}
  .card{
    grid-column: span 12; background:var(--surface); border-radius:var(--radius);
    border:1px solid color-mix(in hsl, var(--muted), transparent 70%);
    box-shadow:var(--shadow); overflow:hidden;
  }
  .card .head{display:flex; justify-content:space-between; align-items:center; padding:16px 16px 0 16px}
  .card .body{padding:16px}
  .dash{display:grid; grid-template-columns: repeat(4, 1fr); gap:14px}
  .metric{
    background:var(--card); border-radius:16px; padding:14px; border:1px solid color-mix(in hsl, var(--muted), transparent 65%);
    display:grid; gap:10px;
  }
  .metric h3{margin:0; font-size:16px; color:var(--muted); font-weight:700; letter-spacing:.3px}
  .val{font-size:26px; font-weight:800}
  .goal{font-size:12px; color:var(--muted)}
  .controls{display:flex; gap:8px; flex-wrap:wrap}
  .pill{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.06); border:1px dashed color-mix(in hsl, var(--muted), transparent 55%); font-size:12px}
  .hint{color:var(--muted); font-size:13px}
  .mini{
    display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:center;
  }
  canvas.spark{width:100%; height:60px; background:linear-gradient(180deg, rgba(255,255,255,.04), transparent)}
  .badges{display:flex; flex-wrap:wrap; gap:10px}
  .badge{
    display:flex; align-items:center; gap:8px;
    background:var(--card); border:1px solid color-mix(in hsl, var(--muted), transparent 60%);
    border-radius:14px; padding:8px 12px; font-size:13px;
  }
  .badge i{width:18px; height:18px; border-radius:4px; display:inline-block}
  .ok{color:var(--accent)} .warn{color:var(--warning)} .bad{color:var(--danger)}
  .grid .span6{grid-column: span 6}
  .grid .span4{grid-column: span 4}
  .grid .span3{grid-column: span 3}
  .grid .span8{grid-column: span 8}
  .grid .span12{grid-column: span 12}
  @media (max-width: 900px){
    .dash{grid-template-columns: repeat(2, 1fr)}
    .grid .span6, .grid .span4, .grid .span3, .grid .span8{grid-column: span 12}
  }

  /* modal */
  .modal{
    position:fixed; inset:0; display:none; place-items:center; z-index:50;
    background:rgba(0,0,0,.45); padding:20px;
  }
  .modal .sheet{
    width:min(520px, 96vw); background:var(--surface); border-radius:16px; border:1px solid color-mix(in hsl, var(--muted), transparent 70%);
    box-shadow:var(--shadow); padding:16px;
  }
  .row{display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:center; margin-bottom:10px}
  .row label{color:var(--muted); font-weight:700}
  .row input[type="number"]{width:110px; text-align:right}

  /* toast */
  .toast{
    position:fixed; left:50%; bottom:24px; transform:translateX(-50%) translateY(30px);
    background:var(--surface); border:1px solid color-mix(in hsl, var(--muted), transparent 65%);
    border-radius:12px; padding:10px 14px; opacity:0; transition: all .3s ease; z-index:60;
  }
  .toast.show{opacity:1; transform:translateX(-50%) translateY(0)}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logo">✓</div>
    <div>
      <h1>Healthy Habit Tracker</h1>
      <div style="font-size:12px; color:var(--muted)">Water • Exercise • Sleep • Screen</div>
    </div>
  </div>
  <div class="actions">
    <button class="btn primary" id="addTodayBtn">Quick: +1 Glass</button>
    <button class="btn" id="settingsBtn">Goals</button>
    <button class="btn ghost" id="exportBtn">Export</button>
    <label class="btn ghost" for="importFile" style="cursor:pointer">Import</label>
    <input id="importFile" type="file" accept="application/json" style="display:none" />
  </div>
</header>

<div class="container">
  <!-- Today Dashboard -->
  <section class="card">
    <div class="head">
      <div>
        <div style="font-weight:800;font-size:18px">Today</div>
        <div class="hint" id="todayDate"></div>
      </div>
      <div class="pill" id="streakPill">Overall Streak: <b id="overallStreak">0</b> days</div>
    </div>
    <div class="body">
      <div class="dash">
        <!-- Water -->
        <div class="metric" data-key="water">
          <h3>Water</h3>
          <div class="mini">
            <div class="val"><span id="waterVal">0</span> <small>glasses</small></div>
            <div class="controls">
              <button class="btn" data-act="dec">−</button>
              <button class="btn primary" data-act="inc">+</button>
            </div>
          </div>
          <div class="goal">Goal: <b id="waterGoalLabel">8</b> glasses</div>
          <canvas class="spark" id="waterChart" width="300" height="60"></canvas>
        </div>

        <!-- Exercise -->
        <div class="metric" data-key="exercise">
          <h3>Exercise</h3>
          <div class="mini">
            <div class="val"><span id="exerciseVal">0</span> <small>min</small></div>
            <div class="controls">
              <button class="btn" data-act="dec">−</button>
              <button class="btn primary" data-act="inc">+</button>
            </div>
          </div>
          <div class="goal">Goal: <b id="exerciseGoalLabel">30</b> min</div>
          <canvas class="spark" id="exerciseChart" width="300" height="60"></canvas>
        </div>

        <!-- Sleep -->
        <div class="metric" data-key="sleep">
          <h3>Sleep</h3>
          <div class="mini">
            <div class="val"><span id="sleepVal">0</span> <small>hrs</small></div>
            <div class="controls">
              <button class="btn" data-act="dec">−</button>
              <button class="btn primary" data-act="inc">+</button>
            </div>
          </div>
          <div class="goal">Goal: <b id="sleepGoalLabel">8</b> hrs</div>
          <canvas class="spark" id="sleepChart" width="300" height="60"></canvas>
        </div>

        <!-- Screen -->
        <div class="metric" data-key="screen">
          <h3>Screen Time</h3>
          <div class="mini">
            <div class="val"><span id="screenVal">0</span> <small>hrs</small></div>
            <div class="controls">
              <button class="btn" data-act="dec">−</button>
              <button class="btn primary" data-act="inc">+</button>
            </div>
          </div>
          <div class="goal">Max: <b id="screenGoalLabel">2</b> hrs</div>
          <canvas class="spark" id="screenChart" width="300" height="60"></canvas>
        </div>
      </div>
      <div class="hint" style="margin-top:10px">Tip: Click “Goals” to change targets. Progress saves in your browser.</div>
    </div>
  </section>

  <!-- Badges -->
  <section class="card">
    <div class="head">
      <div style="font-weight:800;font-size:18px">Badges</div>
      <div class="hint">Earned by meeting goals and building streaks</div>
    </div>
    <div class="body">
      <div class="badges" id="badges"></div>
    </div>
  </section>

  <!-- History -->
  <section class="card">
    <div class="head">
      <div style="font-weight:800;font-size:18px">Last 7 Days</div>
      <div class="hint">Mini charts show your trend vs goal</div>
    </div>
    <div class="body">
      <div class="grid">
        <div class="span3"><div class="pill">Water</div><canvas class="spark" id="w7" width="260" height="60"></canvas></div>
        <div class="span3"><div class="pill">Exercise</div><canvas class="spark" id="e7" width="260" height="60"></canvas></div>
        <div class="span3"><div class="pill">Sleep</div><canvas class="spark" id="s7" width="260" height="60"></canvas></div>
        <div class="span3"><div class="pill">Screen</div><canvas class="spark" id="sc7" width="260" height="60"></canvas></div>
      </div>
    </div>
  </section>
</div>

<!-- Settings Modal -->
<div class="modal" id="modal">
  <div class="sheet">
    <h3 style="margin:0 0 10px">Daily Goals</h3>
    <div class="row"><label for="gWater">Water (glasses)</label><input id="gWater" type="number" min="1" step="1" /></div>
    <div class="row"><label for="gExercise">Exercise (minutes)</label><input id="gExercise" type="number" min="0" step="5" /></div>
    <div class="row"><label for="gSleep">Sleep (hours)</label><input id="gSleep" type="number" min="0" max="24" step="0.5" /></div>
    <div class="row"><label for="gScreen">Screen (max hours)</label><input id="gScreen" type="number" min="0" max="24" step="0.5" /></div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button class="btn" id="closeModal">Cancel</button>
      <button class="btn primary" id="saveGoals">Save</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
(function(){
  const $ = sel => document.querySelector(sel);
  const $$ = sel => [...document.querySelectorAll(sel)];
  const todayISO = () => new Date().toISOString().slice(0,10);

  // --- Storage ---
  const DEFAULT = {
    goals: { water:8, exercise:30, sleep:8, screen:2 },
    days: {} // 'YYYY-MM-DD': {water:0, exercise:0, sleep:0, screen:0}
  };
  const load = () => JSON.parse(localStorage.getItem('hht-data')||'null') || DEFAULT;
  const save = (state) => localStorage.setItem('hht-data', JSON.stringify(state));

  let state = load();

  // ensure last 7 days exist
  function ensureDays(){
    const days = state.days;
    for(let i=6;i>=0;i--){
      const d = new Date(); d.setDate(d.getDate()-i);
      const key = d.toISOString().slice(0,10);
      if(!days[key]) days[key] = {water:0, exercise:0, sleep:0, screen:0};
    }
  }
  ensureDays();
  save(state);

  // --- UI Bindings ---
  const metrics = ['water','exercise','sleep','screen'];
  const labels = {
    water: {unit:'glasses', step:1},
    exercise: {unit:'min', step:5},
    sleep: {unit:'hrs', step:0.5},
    screen: {unit:'hrs', step:0.5}
  };

  $('#todayDate').textContent = new Date().toLocaleDateString(undefined,{weekday:'long', month:'short', day:'numeric'});
  $('#waterGoalLabel').textContent = state.goals.water;
  $('#exerciseGoalLabel').textContent = state.goals.exercise;
  $('#sleepGoalLabel').textContent = state.goals.sleep;
  $('#screenGoalLabel').textContent = state.goals.screen;

  // values
  function getToday(){ const k=todayISO(); if(!state.days[k]) state.days[k]={water:0,exercise:0,sleep:0,screen:0}; return state.days[k]; }
  function setVal(key, delta){
    const t = getToday();
    const step = labels[key].step;
    t[key] = Math.max(0, +(t[key] + delta*step).toFixed(2));
    state.days[todayISO()] = t;
    save(state);
    render();
    checkCelebration();
  }

  // attach button handlers
  $$('.metric').forEach(card=>{
    const key = card.dataset.key;
    card.querySelector('[data-act="inc"]').addEventListener('click', ()=>setVal(key, +1));
    card.querySelector('[data-act="dec"]').addEventListener('click', ()=>setVal(key, -1));
  });
  $('#addTodayBtn').addEventListener('click', ()=> setVal('water', +1));

  // settings modal
  const modal = $('#modal');
  $('#settingsBtn').onclick = ()=>{
    $('#gWater').value = state.goals.water;
    $('#gExercise').value = state.goals.exercise;
    $('#gSleep').value = state.goals.sleep;
    $('#gScreen').value = state.goals.screen;
    modal.style.display='grid';
  };
  $('#closeModal').onclick = ()=> modal.style.display='none';
  $('#saveGoals').onclick = ()=>{
    state.goals.water = Math.max(1, parseInt($('#gWater').value||8));
    state.goals.exercise = Math.max(0, parseInt($('#gExercise').value||30));
    state.goals.sleep = Math.max(0, parseFloat($('#gSleep').value||8));
    state.goals.screen = Math.max(0, parseFloat($('#gScreen').value||2));
    save(state);
    $('#waterGoalLabel').textContent = state.goals.water;
    $('#exerciseGoalLabel').textContent = state.goals.exercise;
    $('#sleepGoalLabel').textContent = state.goals.sleep;
    $('#screenGoalLabel').textContent = state.goals.screen;
    modal.style.display='none';
    render();
  };
  modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.style.display='none'; });

  // export / import
  $('#exportBtn').onclick = ()=>{
    const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href=url; a.download='habit-tracker-backup.json'; a.click();
    URL.revokeObjectURL(url);
  };
  $('#importFile').onchange = (e)=>{
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      try{
        const data = JSON.parse(reader.result);
        if(!data.days || !data.goals) throw new Error('Invalid file');
        state = data; ensureDays(); save(state); render(); toast('Imported successfully ✓');
      }catch(err){ toast('Import failed'); }
    };
    reader.readAsText(file);
    e.target.value='';
  };

  // --- Streaks ---
  function dayMetGoals(dateKey){
    const d = state.days[dateKey];
    if(!d) return false;
    const g = state.goals;
    return d.water>=g.water && d.exercise>=g.exercise && d.sleep>=g.sleep && d.screen<=g.screen;
  }
  function habitMet(key, dateKey){
    const d = state.days[dateKey]; const g = state.goals;
    if(!d) return false;
    if(key==='screen') return d.screen<=g.screen;
    return d[key] >= g[key];
  }
  function streakCount(key){ // consecutive days up to today
    let count=0;
    for(let i=0;;i++){
      const dt=new Date(); dt.setDate(dt.getDate()-i);
      const k=dt.toISOString().slice(0,10);
      if(!state.days[k]) break;
      const met = key==='overall'? dayMetGoals(k) : habitMet(key, k);
      if(met) count++; else break;
    }
    return count;
  }

  function renderBadges(){
    const wrap = $('#badges'); wrap.innerHTML='';
    const badges = []; // {color, label}
    // Hydration Hero: 7-day water streak
    if(streakCount('water')>=7) badges.push({color:'#6ae3b4', label:'Hydration Hero (7d)'});
    // Move Master: 5-day exercise streak
    if(streakCount('exercise')>=5) badges.push({color:'#7c87ff', label:'Move Master (5d)'});
    // Early Bird: 7-day sleep streak
    if(streakCount('sleep')>=7) badges.push({color:'#ffd166', label:'Early Bird (7d)'});
    // Screen Sage: 5-day screen streak
    if(streakCount('screen')>=5) badges.push({color:'#ff6b6b', label:'Screen Sage (5d)'});
    // All-Rounder: 7-day overall streak
    if(streakCount('overall')>=7) badges.push({color:'#00e5ff', label:'All-Rounder (7d)'});

    if(badges.length===0){ wrap.innerHTML = '<div class="hint">No badges yet — keep going! Meet daily goals to unlock rewards.</div>'; return; }
    for(const b of badges){
      const el = document.createElement('div');
      el.className='badge';
      el.innerHTML = '<i style="background:'+b.color+'"></i><span>'+b.label+'</span>';
      wrap.appendChild(el);
    }
  }

  // --- Charts ---
  function drawSpark(canvas, values, goal, invert=false){
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;
    ctx.clearRect(0,0,w,h);
    // background grid
    ctx.globalAlpha = 0.25;
    ctx.fillStyle = '#ffffff10';
    for(let y=0;y<=h;y+=20){ ctx.fillRect(0,y, w, 1); }
    ctx.globalAlpha = 1;

    const maxVal = Math.max(goal*1.2, ...values, 1);
    const barW = w / values.length;
    values.forEach((v,i)=>{
      const ratio = clamp(v/maxVal, 0, 1);
      const bh = Math.round(ratio*h);
      const x = Math.round(i*barW+2);
      const y = invert ? 0 : (h - bh);
      const height = invert ? Math.max(1, h - (h-bh)) : bh;
      // color based on goal met
      const ok = invert ? v <= goal : v >= goal;
      ctx.fillStyle = ok ? '#6ae3b4' : '#7c87ff';
      ctx.fillRect(x, y, Math.max(6, barW-6), Math.max(2, height));
    });
    // goal line
    const gy = invert ? (goal/maxVal)*h : h - (goal/maxVal)*h;
    ctx.strokeStyle = '#ffd166';
    ctx.lineWidth = 2;
    ctx.setLineDash([4,4]);
    ctx.beginPath(); ctx.moveTo(0,gy); ctx.lineTo(w,gy); ctx.stroke();
    ctx.setLineDash([]);
  }
  function clamp(n,min=0,max=1){ return Math.max(min, Math.min(max, n)); }

  function getLast7(key){
    const arr=[];
    for(let i=6;i>=0;i--){
      const d=new Date(); d.setDate(d.getDate()-i);
      const k=d.toISOString().slice(0,10);
      const v = state.days[k]?.[key] ?? 0;
      arr.push(v);
    }
    return arr;
  }

  function renderCharts(){
    drawSpark($('#waterChart'), getLast7('water'), state.goals.water, false);
    drawSpark($('#exerciseChart'), getLast7('exercise'), state.goals.exercise, false);
    drawSpark($('#sleepChart'), getLast7('sleep'), state.goals.sleep, false);
    drawSpark($('#screenChart'), getLast7('screen'), state.goals.screen, true);

    drawSpark($('#w7'), getLast7('water'), state.goals.water, false);
    drawSpark($('#e7'), getLast7('exercise'), state.goals.exercise, false);
    drawSpark($('#s7'), getLast7('sleep'), state.goals.sleep, false);
    drawSpark($('#sc7'), getLast7('screen'), state.goals.screen, true);
  }

  // --- Render All ---
  function render(){
    const t = getToday();
    $('#waterVal').textContent = t.water;
    $('#exerciseVal').textContent = t.exercise;
    $('#sleepVal').textContent = t.sleep;
    $('#screenVal').textContent = t.screen.toFixed(1).replace(/\.0$/,'');

    $('#overallStreak').textContent = streakCount('overall');
    renderBadges();
    renderCharts();
  }

  // --- Celebration when all goals hit today ---
  let firedToday=false;
  function checkCelebration(){
    const k = todayISO();
    if(dayMetGoals(k) && !firedToday){
      firedToday=true;
      confetti();
      toast('All goals met today! 🎉');
    }
  }
  function confetti(){
    const n=80;
    for(let i=0;i<n;i++){
      const s=document.createElement('i');
      const size=6+Math.random()*10|0;
      s.style.position='fixed';
      s.style.left=(Math.random()*100)+'vw';
      s.style.top='-12px'; s.style.width=size+'px'; s.style.height=size+'px';
      s.style.background=`hsl(${Math.random()*360|0} 90% 60%)`; s.style.zIndex=100; s.style.pointerEvents='none';
      document.body.appendChild(s);
      const dy=innerHeight+80+Math.random()*200;
      s.animate([{transform:'translateY(0) rotate(0deg)'},{transform:`translate(${(Math.random()*2-1)*150}px, ${dy}px) rotate(${Math.random()*720|0}deg)`}], {duration:1200+Math.random()*1500, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards'});
      setTimeout(()=>s.remove(), 3200);
    }
  }
  function toast(msg){
    const el = $('#toast');
    el.textContent = msg;
    el.classList.add('show');
    setTimeout(()=>el.classList.remove('show'), 1600);
  }

  // init
  render();
  checkCelebration();
})();</script>
</body>
</html>
"""
path = "/mnt/data/healthy-habit-tracker.html"
with open(path, "w", encoding="utf-8") as f:
    f.write(html)
path
